---
description: 基础设置模块组件规范
globs:
  - "src/pages/basicSettings/**/*.{tsx,ts,less}"
alwaysApply: false
---

# 基础设置模块组件规范

## 模块结构

### 目录组织
```
src/pages/basicSettings/
├── DiagnosisSystem/           # 诊疗体系
│   ├── index.tsx
│   └── index.less
└── ReferralHospital/          # 转诊医院列表
    ├── index.tsx
    └── index.less
```

## 组件模式

### 页面组件结构
- 使用 `PageContainer` 作为根容器
- 使用 `ProTable` 展示列表数据
- 工具栏包含筛选条件和操作按钮

```tsx
// ✅ GOOD
<PageContainer>
  <div className="page-name-page">
    <div className="page-name-card">
      <div className="toolbar">
        <div className="toolbar-left">
          {/* 筛选条件 */}
        </div>
        <div className="toolbar-right">
          {/* 操作按钮 */}
        </div>
      </div>
      <ProTable ... />
    </div>
  </div>
</PageContainer>
```

## 诊疗体系页面特殊规范

### Tab 页面结构
- 使用 Ant Design `Tabs` 组件
- 三个 Tab：量表配置、实验室常备、影像学常备
- 添加按钮使用绝对定位在右上角

```tsx
// ✅ GOOD
<div className="diagnosis-system-card">
  <Button className="add-button" variant="outlined" onClick={handleAdd}>
    <PlusCircleOutlined />
    添加
  </Button>
  <Tabs activeKey={activeTab} onChange={setActiveTab}>
    <TabPane tab="量表配置" key="scale">
      <ProTable ... />
    </TabPane>
    {/* 其他 Tab */}
  </Tabs>
</div>
```

### 量表配置数据类型
```typescript
interface ScaleConfigItem {
  id: string;
  scaleName: string;              // 量表名称
  scaleTargetType: string[];      // 量表题目类型（数组）
  difficulty: string;             // 题量
  features: string[];             // 功能支持（数组）
  createTime: string;
}
```

### Tag 标签颜色
- 量表题目类型：使用 `getScaleTypeColor()` 函数
- 功能支持：使用 `getFeatureColor()` 函数

```tsx
// ✅ GOOD
import { getScaleTypeColor, getFeatureColor } from '@/utils/constants';

<Tag color={getScaleTypeColor(type)} style={{ borderRadius: 12 }}>
  {type}
</Tag>

<Tag color={getFeatureColor(feature)} style={{ borderRadius: 12 }}>
  {feature}
</Tag>
```

## 转诊医院列表规范

### 数据类型
```typescript
interface HospitalItem {
  id: string;
  hospitalLogo: string;           // 医院logo
  hospitalName: string;           // 医院名称
  hospitalAddress: string;        // 医院地址
  hospitalPhone: string;          // 医院电话
  contactDoctorName: string;      // 对接医师姓名
  position: string;               // 职位
  contactMethod: string;          // 联系方式
  createTime: string;
}
```

### 筛选条件
- 所属医院（下拉选择）
- 名称（文本搜索 - 医师名称）

```tsx
// ✅ GOOD
<div className="toolbar-left">
  <div className="toolbar-item">
    <span className="toolbar-label">所属医院：</span>
    <Select placeholder="全部" allowClear style={{ width: 240 }}>
      <Option value="大医院">大医院</Option>
    </Select>
  </div>
  <div className="toolbar-item">
    <span className="toolbar-label">名称：</span>
    <Input placeholder="请输入医师名称" allowClear style={{ width: 240 }} />
  </div>
</div>
```

## 样式规范

### 工具栏样式
```less
.toolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding: 0 24px;

  .toolbar-left {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 6px;
  }

  .toolbar-item {
    margin-right: 16px;

    .toolbar-label {
      font-size: 14px;
      font-weight: 600;
      color: #333;
    }
  }

  .toolbar-right {
    display: flex;
    align-items: center;
    gap: 8px;
  }
}
```

### 按钮样式
```less
.add-button {
  border: 1px solid #a0bcff;
  color: #336fff;
  background-color: #eaf0ff;
  border-radius: 4px;
  padding: 8px 16px;
  font-size: 12px;
}

.query-button {
  color: #fff;
  background-color: #336fff;
  border-radius: 4px;
  padding: 8px 16px;
  font-size: 12px;
}

.reset-button {
  border: 1px solid #d8d8d8;
  color: #333;
  background-color: #d8d8d8;
  border-radius: 4px;
  padding: 8px 16px;
  font-size: 12px;
}
```

### 操作列样式
```less
.action-item {
  display: flex;
  align-items: center;
  gap: 2px;
  cursor: pointer;
  color: #336fff;
  font-size: 12px;

  &.delete {
    color: #ff4d4f;
  }
}
```

## 最佳实践

### 1. 状态管理
```tsx
// ✅ GOOD - 简洁的状态管理
const [searchValue, setSearchValue] = useState<string>('');
const [filteredValue, setFilteredValue] = useState<string>('');

const handleQuery = () => {
  setFilteredValue(searchValue);
  actionRef.current?.reload();
};

const handleReset = () => {
  setSearchValue('');
  setFilteredValue('');
  actionRef.current?.reload();
};
```

### 2. 图片展示
```tsx
// ✅ GOOD
<Image
  src={record.image}
  alt={record.name}
  width={60}
  height={60}
  style={{ objectFit: 'cover', borderRadius: 4 }}
/>
```

### 3. 表格配置
```tsx
// ✅ GOOD
<ProTable
  actionRef={actionRef}
  rowKey="id"
  search={false}
  options={{
    reload: false,
    density: false,
    fullScreen: false,
    setting: false,
  }}
  request={fetchData}
  columns={columns}
  scroll={{ x: 1400 }}
  pagination={{
    pageSize: 10,
  }}
/>
```

## 注意事项

1. **统一样式**
   - 所有基础设置页面使用相同的工具栏样式
   - 按钮样式保持一致

2. **数据格式**
   - 使用 TypeScript 接口定义数据结构
   - 保持字段命名的一致性

3. **操作列**
   - 修改操作使用蓝色
   - 删除操作使用红色
   - 图标和文字左右排列

4. **筛选功能**
   - 查询按钮触发筛选
   - 重置按钮清空所有筛选条件
   - 使用独立的 state 管理搜索值和筛选值
