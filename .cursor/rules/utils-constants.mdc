---
description: Constants and utility functions for patient user module
globs: src/utils/constants.ts
alwaysApply: false
---

# Constants and Utilities

## Enum-like Constants

### Object Constants Pattern
Use object constants for enum-like values:

```typescript
// ✅ GOOD
export const CROWD_CATEGORY = {
  NORMAL: '认知正常人员',
  SCD_WARNING: 'SCD人群（预警期）',
  MCI_CONTROL: 'MCI人群（预控期）',
  SUSPICIOUS: '可疑认知障碍患者',
  HIGH_RISK: '高危险人群',
  DIAGNOSED: '已确诊患者',
};

// ❌ BAD
export enum CrowdCategory {
  NORMAL = 'NORMAL',
  SCD_WARNING = 'SCD_WARNING',
}
```

### Accessing Constants
Use object property access:

```typescript
// ✅ GOOD
category: CROWD_CATEGORY.MCI_CONTROL

// ❌ BAD
category: 'MCI人群（预控期）'
```

## Color Mapping Functions

### Color Map Pattern
Use Record type for type-safe color mappings:

```typescript
// ✅ GOOD
export const getCategoryColor = (category: string): string => {
  const colorMap: Record<string, string> = {
    [CROWD_CATEGORY.NORMAL]: '#68cf50',
    [CROWD_CATEGORY.SCD_WARNING]: '#FFA500',
  };
  return colorMap[category] || 'default';
};
```

### Color Values
- Use hex color codes for consistency
- Provide fallback value with `|| 'default'`
- Document color meanings in comments

## Date Formatting

### Time Format Function
Provide consistent date formatting utilities:

```typescript
// ✅ GOOD
export const getTimeFormat = (time: string): string => {
  const date = new Date(time);
  return date.getFullYear() + '年 ' + 
         (date.getMonth() + 1) + '月 ' + 
         date.getDate() + '日';
};

// Usage
<div>{getTimeFormat(userInfo.diagnosisScoreUpdateTime)}更新</div>
```

### Date Input Format
Accept flexible date formats:
- `'YYYY-MM-DD HH:mm:ss'` for timestamps
- `'YYYY/MM/DD'` for dates

## Status Utilities

### Binary Status
Use numeric comparison for binary status:

```typescript
// ✅ GOOD
export const getStatusColor = (status: number): string => {
  return status === 1 ? '#336fff' : '#ff4d4f';
};

// Usage
{record.status === 1 ? '已完成' : '未完成'}
```

## Export Organization

Export all utilities from single file:
```typescript
// ✅ GOOD
export const CROWD_CATEGORY = { ... };
export const getCategoryColor = (category: string): string => { ... };
export const getStatusColor = (status: number): string => { ... };
export const getTimeFormat = (time: string): string => { ... };
```

## JSDoc Comments

Add JSDoc for exported functions:

```typescript
// ✅ GOOD
/**
 * 获取人群分类对应的颜色
 * @param category 人群分类
 * @returns 颜色值
 */
export const getCategoryColor = (category: string): string => {
  // ...
};
```
